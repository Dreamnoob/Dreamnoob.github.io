gsap.registerPlugin(ScrollTrigger);

window.addEventListener("load", function () {
    headerAnim();
    footerAnim();
    subscriptionAnim();

    initMainPageAnim();
    initProductsPageAnim();
    initProductPageAnim();
    initAboutUsPageAnim();
    initHelpPageAnim();
    initContactsPageAnim();
    initErrorPageAnim();
    initThanksPageAnim();
    initStaticPageAnim();
    initReviewsPageAnim();
    initCollaborationPageAnim();
    initCheckoutPageAnim();
});


function initMainPageAnim() {
    const homePage = document.querySelector(".page-home");

    if (homePage) {
        sliderAnim();
        itemsAnim();
        sweetsAnim();
        benefitsAnim();
        instagramAnim();
        homeHistoryAnim();
    }
}

function initProductsPageAnim() {
    const productsPage = document.querySelector(".page-products");

    if (productsPage) {
        catalogAnim();
    }
}

function initProductPageAnim() {
    const productPage = document.querySelector(".page-product");

    if (productPage) {
        productAnim();
        aboutProductAnim();
        itemsAnim();
    }
}

function initAboutUsPageAnim() {
    const aboutUs = document.querySelector(".page-about_us");

    if (aboutUs) {
        aboutAnim();
        benefitsAnim();
        historyAboutUsAnim();
        instagramAnim();
    }
}

function initHelpPageAnim() {
    const faqPage = document.querySelector(".page-help");

    if (faqPage) {
        helpAnim();
    }
}

function initContactsPageAnim() {
    const contactsPage = document.querySelector(".page-contacts");

    if (contactsPage) {
        contactsAnim();
        instagramAnim();
    }
}

function initErrorPageAnim() {
    const errorPage = document.querySelector(".page-error");

    if (errorPage) {
        errorPageAnim();
    }
}

function initThanksPageAnim() {
    const thanksPage = document.querySelector(".page-thanks");

    if (thanksPage) {
        thanksPageAnim();
    }
}

function initStaticPageAnim() {
    const staticPage = document.querySelector(".page-static");

    if (staticPage) {
        staticPageAnim();
    }
}

function initReviewsPageAnim() {
    const reviewsPage = document.querySelector(".page-reviews");

    if (reviewsPage) {
        reviewsPageAnim();
    }
}

function initCollaborationPageAnim() {
    const collaborationPage = document.querySelector(".page-collaboration");

    if (collaborationPage) {
        partnershipAnim();
        advantageAnim();
        partnershipTypesAnim();
    }
}

function initCheckoutPageAnim() {
    const checkoutPage = document.querySelector(".page-checkout");

    if (checkoutPage) {
        checkoutAnim();
    }
}

function headerAnim() {
    gsap.fromTo(".header-line", {
        width: 0,
    }, {
        width: "100%",
        duration: 0.6,
        ease: "none",
    });
    gsap.from(".header-inner", {
        opacity: 0,
        yPercent: -100,
        rotateX: -90,
        duration: 0.7,
        ease: "power1.out",
    });

}

function sliderAnim() {
    let tl = gsap.timeline();

    tl.from(".slider", {
        yPercent: 200,
        scale: 0,
        duration: 0.7,
        ease: "power1.out",
    });

    tl.from(".slider-nav", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });
}

function itemsAnim() {
    let tl = gsap.timeline({
        scrollTrigger: {
            trigger: ".items-inner",
            start: "top bottom",
        }
    });

    tl.from(".items-inner", {
        yPercent: 90,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".items-slider", {
        opacity: 0,
        duration: 1,
        ease: "none",
    });
}

function sweetsAnim() {
    gsap.from(".sweets-title", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".sweets-title",
            start: "top bottom",
        }
    });

    gsap.from(".sweets-subtitle", {
        yPercent: 200,
        rotateX: 90,
        opacity: 0,
        duration: 0.4,
        ease: "none",
        scrollTrigger: {
            trigger: ".sweets-subtitle",
            start: "top bottom",
        }
    });

    let tl = gsap.timeline({
        scrollTrigger: {
            trigger: ".sweets-content",
            start: "top bottom",
        }
    });

    let tl2 = gsap.timeline({
        scrollTrigger: {
            trigger: ".sweets-content",
            start: "top bottom",
        }
    });

    tl.from(".sweets-elem1", {
        scale: 0,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.fromTo(".sweets-elem3 span", {
        x: "-0%",
    }, {
        x: "-100%",
        duration: 0.3,
        ease: "none",
    });


    tl2.from(".sweets-elem2", {
        delay: 0.4,
        scale: 0,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".sweets-one", {
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".sweets-one .sweets-advantage", {
        yPercent: 20,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".sweets-one .sweets-descr", {
        yPercent: 20,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.fromTo(".sweets-elem4 span", {
        x: "0%",
    }, {
        x: "100%",
        duration: 0.3,
        ease: "none",
    });

    tl.from(".sweets-two", {
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".sweets-two .sweets-advantage", {
        yPercent: 20,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".sweets-two .sweets-descr", {
        yPercent: 20,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.fromTo(".sweets-elem6 span", {
        y: "0%",
    }, {
        y: "100%",
        duration: 0.3,
        ease: "none",
    });

    tl.from(".sweets-elem7", {
        scale: 0,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.fromTo(".sweets-elem8 span", {
        x: "0%",
    }, {
        x: "-100%",
        duration: 0.3,
        ease: "none",
    });


    tl.from(".sweets-three", {
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".sweets-three .sweets-advantage", {
        yPercent: 20,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".sweets-three .sweets-descr", {
        yPercent: 20,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".sweets .btn", {
        yPercent: 200,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });
}

function benefitsAnim() {
    const benefitsItems = gsap.utils.toArray('.benefits-item');

    benefitsItems.forEach(benefitsItem => {
        gsap.from(benefitsItem, {
            y: 200,
            opacity: 0,
            scale: 0,
            duration: 0.3,
            ease: "none",
            scrollTrigger: {
                trigger: benefitsItem,
                start: "top bottom",
            }
        });
    });

    gsap.from(".benefits-video", {
        opacity: 0,
        scale: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".benefits-video",
            start: "top bottom",
        }
    });
}

function instagramAnim() {
    let tl = gsap.timeline({
        scrollTrigger: {
            trigger: ".instagram",
            start: "top bottom",
        }
    });

    const items = document.querySelectorAll(".instagram-item");

    if (window.innerWidth >= 1200) {
        tl.from(items[2], {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
        });

        tl.from(items[5], {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
        });

        tl.from(".instagram-social", {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
        });

        tl.from(items[3], {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
        });

        tl.from(items[4], {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
        });

        tl.from(items[6], {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
        });

        tl.from(items[1], {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
        });
    } else {
        tl.from(".instagram-social", {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
        });
        tl.from(items[1], {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
        });
        tl.from(items[2], {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
        });
        tl.from(items[3], {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
        });
        tl.from(items[4], {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
        });
        tl.from(items[5], {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
        });
        tl.from(items[6], {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
        });
    }

}

function homeHistoryAnim() {
    gsap.from(".page-home .history-title", {
        yPercent: 200,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".history-title",
            start: "top bottom",
        }
    });

    gsap.from(".page-home .history-text", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".history-text",
            start: "top bottom",
        }
    });

    gsap.from(".page-home .history .btn", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".history .btn",
            start: "top bottom",
        }
    });
}

function subscriptionAnim() {
    gsap.from(".subscription-inner", {
        opacity: 0,
        scale: 0,
        duration: 0.6,
        ease: "none",
        scrollTrigger: {
            trigger: ".subscription",
            start: "top bottom",
        }
    });
}

function footerAnim() {
    gsap.from(".footer-inner", {
        yPercent: 100,
        opacity: 0,
        duration: 0.6,
        ease: "none",
        scrollTrigger: {
            trigger: ".footer",
            start: "top bottom",
        }
    });
}

function catalogAnim() {
    let tl = gsap.timeline({
        scrollTrigger: {
            trigger: ".catalog",
            start: "top bottom",
        }
    });

    tl.from(".catalog-title", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".catalog-form", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".catalog-list", {
        opacity: 0,
        duration: 1,
        ease: "power1.out",
    });
}

function productAnim() {
    let tl = gsap.timeline({
        scrollTrigger: {
            trigger: ".product",
            start: "top bottom",
        }
    });

    tl.from(".product-slider", {
        opacity: 0,
        duration: 0.5,
        ease: "none",
    });

    tl.from(".product-name", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".product-double", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".product-sizes", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".product-list", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".product-wrapper", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });
}

function aboutProductAnim() {
    gsap.from(".about-product-inner", {
        yPercent: 100,
        opacity: 0,
        duration: 0.6,
        ease: "none",
        scrollTrigger: {
            trigger: ".about-product-inner",
            start: "top bottom",
        }
    });
}

function aboutAnim() {
    let tl = gsap.timeline({
        scrollTrigger: {
            trigger: ".about",
            start: "top bottom",
        }
    });

    tl.from(".about-title", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".about-text", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });
    tl.from(".about-img", {
        rotateX: 90,
        scale: 0,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });
}

function historyAboutUsAnim() {
    gsap.from(".history-title", {
        yPercent: 200,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".history-title",
            start: "top bottom",
        }
    });

    gsap.from(".history-text", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".history-text",
            start: "top bottom",
        }
    });


    const historyItems = gsap.utils.toArray('.history-item');

    let tl = gsap.timeline({
        scrollTrigger: {
            trigger: ".history-list",
            start: "top bottom",
        }
    });

    historyItems.forEach(historyItem => {
        tl.from(historyItem, {
            y: 200,
            opacity: 0,
            scale: 0,
            duration: 0.5,
            ease: "none",
        });
    });
}

function helpAnim() {
    gsap.from(".help-title", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".faq-title",
            start: "top bottom",
        }
    });

    let tl = gsap.timeline({
        scrollTrigger: {
            trigger: ".help-list",
            start: "top bottom",
        }
    });

    const helpItems = gsap.utils.toArray('.help-item');

    helpItems.forEach(helpItem => {
        tl.from(helpItem, {
            yPercent: 100,
            opacity: 0,
            duration: 0.2,
            ease: "none",
        });
    });

    gsap.from(".help-delivery", {
        scale: 0,
        opacity: 0,
        duration: 0.5,
        ease: "none",
        scrollTrigger: {
            trigger: ".help-delivery",
            start: "top bottom",
        }
    });

    gsap.from(".help-form", {
        scale: 0,
        opacity: 0,
        duration: 0.5,
        ease: "none",
        scrollTrigger: {
            trigger: ".help-form",
            start: "top bottom",
        }
    });
}

function contactsAnim() {
    let tl = gsap.timeline({
        scrollTrigger: {
            trigger: ".contacts",
            start: "top bottom",
        }
    });

    tl.from(".contacts-title", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".contacts-subtitle", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    const contactFields = gsap.utils.toArray('.contacts-field');

    contactFields.forEach(contactField => {
        tl.from(contactField, {
            yPercent: 100,
            rotateX: 90,
            opacity: 0,
            duration: 0.3,
            ease: "none",
        });
    });

    tl.from(".contacts-btn", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });
}

function errorPageAnim() {
    let tl = gsap.timeline({
        scrollTrigger: {
            trigger: ".error",
            start: "top bottom",
        }
    });

    tl.from(".error-img", {
        scale: 0,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".error-title", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".error-text", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".error-btn", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });
}

function thanksPageAnim() {
    let tl = gsap.timeline({
        scrollTrigger: {
            trigger: ".thanks",
            start: "top bottom",
        }
    });

    tl.from(".thanks-img", {
        scale: 0,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".thanks-title", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".thanks-text", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".thanks-btn", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });
}

function staticPageAnim() {
    let tl = gsap.timeline({
        scrollTrigger: {
            trigger: ".static",
            start: "top bottom",
        }
    });

    tl.from(".static-title", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.from(".static-list", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });
    tl.from(".static-content", {
        yPercent: 100,
        scale: 0,
        duration: 0.4,
        ease: "power1.out",
    });
}

function reviewsPageAnim() {
    let tl = gsap.timeline();

    tl.from(".reviews-title", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl.to(".reviews-wrapper", {
        opacity: 1,
        duration: 0.3,
        ease: "power1.out",
    });

    tl.from(".reviews-wrapper .btn", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });


    const reviewItems = gsap.utils.toArray('.reviews-item');

    reviewItems.forEach(reviewItem => {
        gsap.from(reviewItem, {
            yPercent: 100,
            opacity: 0,
            duration: 0.3,
            ease: "none",
            scrollTrigger: {
                trigger: reviewItem,
                start: "top bottom",
            }
        });
    });

    gsap.from(".reviews-form", {
        scale: 0,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".reviews-form",
            start: "top bottom",
        }
    });
}

function partnershipAnim() {
    let tl = gsap.timeline({
        scrollTrigger: {
            trigger: ".partnership-gallery",
            start: "top bottom",
        }
    });

    const partnershipGallery = gsap.utils.toArray('.partnership-gallery li');

    partnershipGallery.forEach(item => {
        tl.from(item, {
            opacity: 0,
            scale: 0,
            duration: 0.3,
            ease: "none",
        });
    });

    let tl2 = gsap.timeline({
        scrollTrigger: {
            trigger: ".partnership-info",
            start: "top bottom",
        }
    });

    tl2.from(".partnership-title", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
    });

    tl2.from(".partnership-subtitle", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.2,
        ease: "none",
    });

    const partnershipList = gsap.utils.toArray('.partnership-list li');

    partnershipList.forEach(item => {
        tl2.from(item, {
            yPercent: 100,
            rotateX: 90,
            opacity: 0,
            duration: 0.2,
            ease: "none",
        });
    });
}

function advantageAnim() {
    gsap.from(".advantage-title", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".advantage-inner",
            start: "top bottom",
        }
    });

    const advantageList = gsap.utils.toArray('.advantage-list li');

    let tl = gsap.timeline({
        scrollTrigger: {
            trigger: ".advantage-list",
            start: "top bottom",
        }
    });

    advantageList.forEach(item => {
        tl.from(item, {
            yPercent: 100,
            rotateX: 90,
            opacity: 0,
            duration: 0.2,
            ease: "none",
        });
    });
}

function partnershipTypesAnim() {
    gsap.from(".partnership-types-title", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".partnership-types-title",
            start: "top bottom",
        }
    });


    const partnershipTypesList = gsap.utils.toArray('.partnership-types-item');

    let tl = gsap.timeline({
        scrollTrigger: {
            trigger: ".partnership-types-list",
            start: "top bottom",
        }
    });

    partnershipTypesList.forEach(item => {
        tl.from(item, {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
        });
    });
}

function checkoutAnim() {
    gsap.from(".checkout-title", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".checkout-title",
            start: "top bottom",
        }
    });


    const checkoutFormItems = gsap.utils.toArray('.checkout-form-item');

    checkoutFormItems.forEach(item => {
        gsap.from(item, {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
            scrollTrigger: {
                trigger: item,
                start: "top bottom",
            }
        });
    });

    gsap.from(".checkout-basket-top", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".checkout-basket-top",
            start: "top bottom",
        }
    });

    gsap.from(".checkout-basket-free", {
        scale: 0,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".checkout-basket-free",
            start: "top bottom",
        }
    });

    
    const checkoutBasketList = gsap.utils.toArray('.checkout-basket-item');

    checkoutBasketList.forEach(item => {
        gsap.from(item, {
            scale: 0,
            opacity: 0,
            duration: 0.3,
            ease: "none",
            scrollTrigger: {
                trigger: item,
                start: "top bottom",
            }
        });
    });

    gsap.from(".checkout-add", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".checkout-add",
            start: "top bottom",
        }
    });

    gsap.from(".checkout-basket-total", {
        yPercent: 100,
        rotateX: 90,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".checkout-basket-total",
            start: "top bottom",
        }
    });

    gsap.from(".checkout-basket .btn-orange", {
        yPercent: 100,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".checkout-basket .btn-orange",
            start: "top bottom",
        }
    });

    gsap.from(".checkout-basket-info", {
        yPercent: 100,
        opacity: 0,
        duration: 0.3,
        ease: "none",
        scrollTrigger: {
            trigger: ".checkout-basket-info",
            start: "top bottom",
        }
    });
}