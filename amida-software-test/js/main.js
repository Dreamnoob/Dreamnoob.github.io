"use strict"; document.addEventListener("DOMContentLoaded", (function () { })); var basket = document.querySelector("#basket"), basketLink = document.querySelector("#basketLink"), basketClose = document.querySelector("#basketClose"), basketEmpty = document.querySelector("#basketEmpty"), basketContent = document.querySelector("#basketContent"), basketList = document.querySelector("#basketList"), basketReset = document.querySelector("#basketReset"), basketCounter = document.querySelector("#basketCounter"), basketPrice = document.querySelector("#basketPrice"), headerProductsCounter = document.querySelector("#headerProductsCounter"), catalogList = document.querySelector("#catalogList"); function updateHeaderProductsCounter() { var e = JSON.parse(localStorage.getItem("productsId")) || []; headerProductsCounter.textContent = e.length } function showBasket() { basket.classList.add("open") } function hideBasket() { basket.classList.remove("open") } function addToLocalStorage(e) { var t = JSON.parse(localStorage.getItem("productsId")) || []; t.push(e), localStorage.setItem("productsId", JSON.stringify(t)) } function removeFromLocalStorage(e) { var t = JSON.parse(localStorage.getItem("productsId")) || []; t = t.filter((function (t) { return t !== e })), localStorage.setItem("productsId", JSON.stringify(t)) } function checkLocalStorage() { 0 != (JSON.parse(localStorage.getItem("productsId")) || []).length ? (basketEmpty.classList.add("hide"), basketContent.classList.add("show")) : (basketEmpty.classList.remove("hide"), basketContent.classList.remove("show")) } function renderBasketList() { var e = JSON.parse(localStorage.getItem("productsId")) || [], t = 0, r = 0; basketList.innerHTML = "", basketCounter.innerText = "", basketPrice.innerText = "", e.forEach((function (e) { var o = document.getElementById(e); if (o) { o.querySelector(".product-btn").setAttribute("disabled", "true"); var a = o.cloneNode(!0); a.querySelector(".product-btn").remove(); var s = document.createElement("button"); s.classList.add("product-delete", "btn", "btn-primary"), s.type = "button", s.innerHTML = '<i class="fas fa-trash" style="margin-right: 5px;"></i>Видалити', s.addEventListener("click", (function () { o.querySelector(".product-btn").removeAttribute("disabled"), removeFromLocalStorage(e), updateHeaderProductsCounter(), checkLocalStorage(), renderBasketList() })), a.appendChild(s), basketList.appendChild(a), t++, r += parseFloat(o.querySelector(".product-price span").innerText) } })), basketCounter.innerText = t, basketPrice.innerText = r } function clearBasket() { (JSON.parse(localStorage.getItem("productsId")) || []).forEach((function (e) { document.getElementById(e).querySelector(".product-btn").removeAttribute("disabled") })), localStorage.removeItem("productsId"), updateHeaderProductsCounter(), checkLocalStorage(), renderBasketList() } renderBasketList(), updateHeaderProductsCounter(), checkLocalStorage(), basketLink.addEventListener("click", (function () { basket.classList.contains("open") ? hideBasket() : showBasket() })), basketClose.addEventListener("click", hideBasket), basketReset.addEventListener("click", clearBasket), catalogList.addEventListener("click", (function (e) { var t = e.target.closest(".product-btn"); t && (t.setAttribute("disabled", "true"), addToLocalStorage(t.closest(".product").id), updateHeaderProductsCounter(), checkLocalStorage(), renderBasketList()) }));